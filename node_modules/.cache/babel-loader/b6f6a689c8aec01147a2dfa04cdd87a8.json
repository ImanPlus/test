{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport React, { Children, cloneElement, isValidElement } from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual } from 'recompose';\nimport { useDropzone } from 'react-dropzone';\nimport { makeStyles } from '@material-ui/core/styles';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport classnames from 'classnames';\nimport { useInput, useTranslate } from 'ra-core';\nimport Labeled from './Labeled';\nimport FileInputPreview from './FileInputPreview';\nimport sanitizeRestProps from './sanitizeRestProps';\nimport InputHelperText from './InputHelperText';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    dropZone: {\n      background: theme.palette.background.default,\n      cursor: 'pointer',\n      padding: theme.spacing(1),\n      textAlign: 'center',\n      color: theme.palette.getContrastText(theme.palette.background.default)\n    },\n    preview: {},\n    removeButton: {},\n    root: {\n      width: '100%'\n    }\n  };\n}, {\n  name: 'RaFileInput'\n});\n\nvar FileInput = function (_a) {\n  var accept = _a.accept,\n      children = _a.children,\n      className = _a.className,\n      classesOverride = _a.classes,\n      format = _a.format,\n      helperText = _a.helperText,\n      label = _a.label,\n      _b = _a.labelMultiple,\n      labelMultiple = _b === void 0 ? 'ra.input.file.upload_several' : _b,\n      _c = _a.labelSingle,\n      labelSingle = _c === void 0 ? 'ra.input.file.upload_single' : _c,\n      maxSize = _a.maxSize,\n      minSize = _a.minSize,\n      _d = _a.multiple,\n      multiple = _d === void 0 ? false : _d,\n      _e = _a.options,\n      _f = _e === void 0 ? {} : _e,\n      inputPropsOptions = _f.inputProps,\n      options = __rest(_f, [\"inputProps\"]),\n      parse = _a.parse,\n      placeholder = _a.placeholder,\n      resource = _a.resource,\n      source = _a.source,\n      validate = _a.validate,\n      rest = __rest(_a, [\"accept\", \"children\", \"className\", \"classes\", \"format\", \"helperText\", \"label\", \"labelMultiple\", \"labelSingle\", \"maxSize\", \"minSize\", \"multiple\", \"options\", \"parse\", \"placeholder\", \"resource\", \"source\", \"validate\"]);\n\n  var translate = useTranslate();\n  var classes = useStyles({\n    classes: classesOverride\n  }); // turn a browser dropped file structure into expected structure\n\n  var transformFile = function (file) {\n    var _a;\n\n    if (!(file instanceof File)) {\n      return file;\n    }\n\n    var _b = Children.only(children).props,\n        source = _b.source,\n        title = _b.title;\n    var preview = URL.createObjectURL(file);\n    var transformedFile = (_a = {\n      rawFile: file\n    }, _a[source] = preview, _a);\n\n    if (title) {\n      transformedFile[title] = file.name;\n    }\n\n    return transformedFile;\n  };\n\n  var transformFiles = function (files) {\n    if (!files) {\n      return multiple ? [] : null;\n    }\n\n    if (Array.isArray(files)) {\n      return files.map(transformFile);\n    }\n\n    return transformFile(files);\n  };\n\n  var _g = useInput(__assign({\n    format: format || transformFiles,\n    parse: parse || transformFiles,\n    source: source,\n    type: 'file',\n    validate: validate\n  }, rest)),\n      id = _g.id,\n      _h = _g.input,\n      onChange = _h.onChange,\n      value = _h.value,\n      inputProps = __rest(_h, [\"onChange\", \"value\"]),\n      meta = _g.meta,\n      isRequired = _g.isRequired;\n\n  var touched = meta.touched,\n      error = meta.error;\n  var files = value ? Array.isArray(value) ? value : [value] : [];\n\n  var onDrop = function (newFiles, rejectedFiles, event) {\n    var updatedFiles = multiple ? __spreadArrays(files, newFiles) : __spreadArrays(newFiles);\n\n    if (multiple) {\n      onChange(updatedFiles);\n    } else {\n      onChange(updatedFiles[0]);\n    }\n\n    if (options.onDrop) {\n      options.onDrop(newFiles, rejectedFiles, event);\n    }\n  };\n\n  var onRemove = function (file) {\n    return function () {\n      if (multiple) {\n        var filteredFiles = files.filter(function (stateFile) {\n          return !shallowEqual(stateFile, file);\n        });\n        onChange(filteredFiles);\n      } else {\n        onChange(null);\n      }\n    };\n  };\n\n  var childrenElement = isValidElement(Children.only(children)) ? Children.only(children) : undefined;\n\n  var _j = useDropzone(__assign(__assign({}, options), {\n    accept: accept,\n    maxSize: maxSize,\n    minSize: minSize,\n    multiple: multiple,\n    onDrop: onDrop\n  })),\n      getRootProps = _j.getRootProps,\n      getInputProps = _j.getInputProps;\n\n  return React.createElement(Labeled, __assign({\n    id: id,\n    label: label,\n    className: classnames(classes.root, className),\n    source: source,\n    resource: resource,\n    isRequired: isRequired,\n    meta: meta\n  }, sanitizeRestProps(rest)), React.createElement(React.Fragment, null, React.createElement(\"div\", __assign({\n    \"data-testid\": \"dropzone\",\n    className: classes.dropZone\n  }, getRootProps()), React.createElement(\"input\", __assign({\n    id: id\n  }, getInputProps(__assign(__assign({}, inputProps), inputPropsOptions)))), placeholder ? placeholder : multiple ? React.createElement(\"p\", null, translate(labelMultiple)) : React.createElement(\"p\", null, translate(labelSingle))), children && React.createElement(\"div\", {\n    className: \"previews\"\n  }, files.map(function (file, index) {\n    return React.createElement(FileInputPreview, {\n      key: index,\n      file: file,\n      onRemove: onRemove(file),\n      className: classes.removeButton\n    }, cloneElement(childrenElement, {\n      record: file,\n      className: classes.preview\n    }));\n  })), React.createElement(FormHelperText, null, React.createElement(InputHelperText, {\n    touched: touched,\n    error: error,\n    helperText: helperText\n  }))));\n};\n\nFileInput.propTypes = {\n  accept: PropTypes.string,\n  children: PropTypes.element,\n  classes: PropTypes.object,\n  className: PropTypes.string,\n  id: PropTypes.string,\n  isRequired: PropTypes.bool,\n  label: PropTypes.string,\n  labelMultiple: PropTypes.string,\n  labelSingle: PropTypes.string,\n  maxSize: PropTypes.number,\n  minSize: PropTypes.number,\n  multiple: PropTypes.bool,\n  options: PropTypes.object,\n  resource: PropTypes.string,\n  source: PropTypes.string,\n  placeholder: PropTypes.node\n};\nexport default FileInput;","map":{"version":3,"sources":["E:/Top Learn/My Project/ReactJs Course/admin/node_modules/ra-ui-materialui/esm/input/FileInput.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArrays","il","r","Array","k","a","j","jl","React","Children","cloneElement","isValidElement","PropTypes","shallowEqual","useDropzone","makeStyles","FormHelperText","classnames","useInput","useTranslate","Labeled","FileInputPreview","sanitizeRestProps","InputHelperText","useStyles","theme","dropZone","background","palette","default","cursor","padding","spacing","textAlign","color","getContrastText","preview","removeButton","root","width","name","FileInput","_a","accept","children","className","classesOverride","classes","format","helperText","label","_b","labelMultiple","_c","labelSingle","maxSize","minSize","_d","multiple","_e","options","_f","inputPropsOptions","inputProps","parse","placeholder","resource","source","validate","rest","translate","transformFile","file","File","only","props","title","URL","createObjectURL","transformedFile","rawFile","transformFiles","files","isArray","map","_g","type","id","_h","input","onChange","value","meta","isRequired","touched","error","onDrop","newFiles","rejectedFiles","event","updatedFiles","onRemove","filteredFiles","filter","stateFile","childrenElement","undefined","_j","getRootProps","getInputProps","createElement","Fragment","index","key","record","propTypes","string","element","object","bool","number","node"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport React, { Children, cloneElement, isValidElement, } from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual } from 'recompose';\nimport { useDropzone } from 'react-dropzone';\nimport { makeStyles } from '@material-ui/core/styles';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport classnames from 'classnames';\nimport { useInput, useTranslate } from 'ra-core';\nimport Labeled from './Labeled';\nimport FileInputPreview from './FileInputPreview';\nimport sanitizeRestProps from './sanitizeRestProps';\nimport InputHelperText from './InputHelperText';\nvar useStyles = makeStyles(function (theme) { return ({\n    dropZone: {\n        background: theme.palette.background.default,\n        cursor: 'pointer',\n        padding: theme.spacing(1),\n        textAlign: 'center',\n        color: theme.palette.getContrastText(theme.palette.background.default),\n    },\n    preview: {},\n    removeButton: {},\n    root: { width: '100%' },\n}); }, { name: 'RaFileInput' });\nvar FileInput = function (_a) {\n    var accept = _a.accept, children = _a.children, className = _a.className, classesOverride = _a.classes, format = _a.format, helperText = _a.helperText, label = _a.label, _b = _a.labelMultiple, labelMultiple = _b === void 0 ? 'ra.input.file.upload_several' : _b, _c = _a.labelSingle, labelSingle = _c === void 0 ? 'ra.input.file.upload_single' : _c, maxSize = _a.maxSize, minSize = _a.minSize, _d = _a.multiple, multiple = _d === void 0 ? false : _d, _e = _a.options, _f = _e === void 0 ? {} : _e, inputPropsOptions = _f.inputProps, options = __rest(_f, [\"inputProps\"]), parse = _a.parse, placeholder = _a.placeholder, resource = _a.resource, source = _a.source, validate = _a.validate, rest = __rest(_a, [\"accept\", \"children\", \"className\", \"classes\", \"format\", \"helperText\", \"label\", \"labelMultiple\", \"labelSingle\", \"maxSize\", \"minSize\", \"multiple\", \"options\", \"parse\", \"placeholder\", \"resource\", \"source\", \"validate\"]);\n    var translate = useTranslate();\n    var classes = useStyles({ classes: classesOverride });\n    // turn a browser dropped file structure into expected structure\n    var transformFile = function (file) {\n        var _a;\n        if (!(file instanceof File)) {\n            return file;\n        }\n        var _b = Children.only(children).props, source = _b.source, title = _b.title;\n        var preview = URL.createObjectURL(file);\n        var transformedFile = (_a = {\n                rawFile: file\n            },\n            _a[source] = preview,\n            _a);\n        if (title) {\n            transformedFile[title] = file.name;\n        }\n        return transformedFile;\n    };\n    var transformFiles = function (files) {\n        if (!files) {\n            return multiple ? [] : null;\n        }\n        if (Array.isArray(files)) {\n            return files.map(transformFile);\n        }\n        return transformFile(files);\n    };\n    var _g = useInput(__assign({ format: format || transformFiles, parse: parse || transformFiles, source: source, type: 'file', validate: validate }, rest)), id = _g.id, _h = _g.input, onChange = _h.onChange, value = _h.value, inputProps = __rest(_h, [\"onChange\", \"value\"]), meta = _g.meta, isRequired = _g.isRequired;\n    var touched = meta.touched, error = meta.error;\n    var files = value ? (Array.isArray(value) ? value : [value]) : [];\n    var onDrop = function (newFiles, rejectedFiles, event) {\n        var updatedFiles = multiple ? __spreadArrays(files, newFiles) : __spreadArrays(newFiles);\n        if (multiple) {\n            onChange(updatedFiles);\n        }\n        else {\n            onChange(updatedFiles[0]);\n        }\n        if (options.onDrop) {\n            options.onDrop(newFiles, rejectedFiles, event);\n        }\n    };\n    var onRemove = function (file) { return function () {\n        if (multiple) {\n            var filteredFiles = files.filter(function (stateFile) { return !shallowEqual(stateFile, file); });\n            onChange(filteredFiles);\n        }\n        else {\n            onChange(null);\n        }\n    }; };\n    var childrenElement = isValidElement(Children.only(children))\n        ? Children.only(children)\n        : undefined;\n    var _j = useDropzone(__assign(__assign({}, options), { accept: accept,\n        maxSize: maxSize,\n        minSize: minSize,\n        multiple: multiple,\n        onDrop: onDrop })), getRootProps = _j.getRootProps, getInputProps = _j.getInputProps;\n    return (React.createElement(Labeled, __assign({ id: id, label: label, className: classnames(classes.root, className), source: source, resource: resource, isRequired: isRequired, meta: meta }, sanitizeRestProps(rest)),\n        React.createElement(React.Fragment, null,\n            React.createElement(\"div\", __assign({ \"data-testid\": \"dropzone\", className: classes.dropZone }, getRootProps()),\n                React.createElement(\"input\", __assign({ id: id }, getInputProps(__assign(__assign({}, inputProps), inputPropsOptions)))),\n                placeholder ? (placeholder) : multiple ? (React.createElement(\"p\", null, translate(labelMultiple))) : (React.createElement(\"p\", null, translate(labelSingle)))),\n            children && (React.createElement(\"div\", { className: \"previews\" }, files.map(function (file, index) { return (React.createElement(FileInputPreview, { key: index, file: file, onRemove: onRemove(file), className: classes.removeButton }, cloneElement(childrenElement, {\n                record: file,\n                className: classes.preview,\n            }))); }))),\n            React.createElement(FormHelperText, null,\n                React.createElement(InputHelperText, { touched: touched, error: error, helperText: helperText })))));\n};\nFileInput.propTypes = {\n    accept: PropTypes.string,\n    children: PropTypes.element,\n    classes: PropTypes.object,\n    className: PropTypes.string,\n    id: PropTypes.string,\n    isRequired: PropTypes.bool,\n    label: PropTypes.string,\n    labelMultiple: PropTypes.string,\n    labelSingle: PropTypes.string,\n    maxSize: PropTypes.number,\n    minSize: PropTypes.number,\n    multiple: PropTypes.bool,\n    options: PropTypes.object,\n    resource: PropTypes.string,\n    source: PropTypes.string,\n    placeholder: PropTypes.node,\n};\nexport default FileInput;\n"]},"metadata":{},"sourceType":"module"}